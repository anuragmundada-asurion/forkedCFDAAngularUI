'use strict';

describe('Unit Tests for Public View FAL:', function () {
    //dependencies to be injected
    var $state,
        $stateParams,
        $rootScope,
        $httpBackend,
        $scope,
        $controller,
        User,
        UserService,
        ProgramFactory;

    //helper function
    function changeState(state, params) {
        $state.go(state, params);
        $rootScope.$digest();
    }

    //helper variable
    var testId = '66d1d2645f8acd25c2e79bb60b7342da';

    beforeEach(function () {
        inject(function (_$rootScope_, _$controller_, _$httpBackend_, _$state_, _$stateParams_, _User_, _UserService_, _ProgramFactory_) {
            $rootScope = _$rootScope_;
            $controller = _$controller_;
            $httpBackend = _$httpBackend_;
            $state = _$state_;
            $stateParams = _$stateParams_;
            User = _User_;
            UserService = _UserService_;
            ProgramFactory = _ProgramFactory_;
        });

        UserService.setUser({"role": "GSA_CFDA_R_cfdasuperuser"});


        //set up the mock backend service... it returns this json
        var responseJson = "{\"program\": {\"id\":\"66d1d2645f8acd25c2e79bb60b7342da\",\"data\":{\"award\":{\"procedures\":{\"content\":\"A peer review panel considers each proposal, evaluates the qualifications of applicants in line with research to be undertaken and determines priority for final negotiations of the grant.\"}},\"title\":\"Agricultural Research_Basic and Applied Research\",\"usage\":{\"rules\":{\"content\":\"Research is conducted that is in cooperation with and is correlated with the Agricultural Research Service\'s in-house research programs and projects.  Limited discretionary research funds are periodically made available.\"},\"loanTerms\":{\"flag\":\"na\"},\"restrictions\":{\"flag\":\"na\"},\"discretionaryFund\":{\"flag\":\"na\"}},\"website\":\"http:\/\/www.ars.usda.gov\",\"contacts\":{\"list\":[{\"zip\":\"20705\",\"city\":\"Beltsville\",\"type\":\"headquarter\",\"email\":\"kathleen.townson@ars.usda.gov\",\"phone\":\"(301) 504-1702.\",\"state\":\"MD\",\"title\":\"Grants Management Analyst\",\"address\":\"5601 Sunnyside Ave, MS-5110\",\"country\":\"US\",\"fullName\":\"Kathleen S. Townson,\"}],\"local\":{\"flag\":\"appendix\",\"additionalInfo\":{\"content\":\"See the Agricultural Research Service Regional Offices listed in Appendix IV of the Catalog.\"}}},\"projects\":{\"flag\":\"no\"},\"financial\":{\"accounts\":[{\"code\":\"12-1400-0-1-352\"}],\"treasury\":{\"tafs\":[{\"accountCode\":\"12-1400\",\"departmentCode\":\"12\"}]},\"obligations\":[{\"values\":{\"2014\":{\"actual\":31391667,\"estimate\":33000000},\"2015\":{\"estimate\":33000000},\"2016\":{\"estimate\":33000000}},\"questions\":{\"recovery\":{\"flag\":\"na\"},\"salary_or_expense\":{\"flag\":\"na\"}},\"additionalInfo\":{},\"assistanceType\":\"0003003\"}],\"additionalInfo\":{\"content\":\"$1,000 to $25,000.  Average $15,000\"}},\"objective\":\"To make agricultural research discoveries, evaluate alternative ways of attaining research goals, and provide scientific technical information.\",\"postAward\":{\"audit\":{\"flag\":\"yes\",\"content\":\"As performed by cognizant audit agency.\",\"questions\":{\"OMBCircularA133\":{\"flag\":\"yes\"}}},\"records\":{\"content\":\"Financial records, supporting documents, statistical records, and all other records pertinent to an award shall be retained for a period of three years from the date of submission of the final expenditure report or, for awards that are renewed quarterly or annually, from the date of the submission of the quarterly or annual financial report, as authorized by the Federal awarding agency.\"},\"reports\":{\"flag\":\"yes\",\"list\":{\"cash\":{\"flag\":\"na\"},\"program\":{\"flag\":\"yes\",\"content\":\"Progress reports, final technical reports, financial statements, and inventions and subaward reports.\"},\"progress\":{\"flag\":\"na\"},\"expenditure\":{\"flag\":\"na\"},\"performanceMonitoring\":{\"flag\":\"na\"}}},\"documents\":{\"flag\":\"yes\",\"content\":\"7 CFR 3015 and 7 CFR 3019.\"},\"accomplishments\":{\"flag\":\"na\",\"list\":{\"2014\":{\"content\":{}},\"2015\":{\"content\":{}},\"2016\":{\"content\":{}}}}},\"assistance\":{\"moe\":{\"flag\":\"na\"},\"formula\":{\"flag\":\"no\"},\"matching\":{\"flag\":\"na\"},\"limitation\":{\"awarded\":\"other\",\"content\":\"None\"}},\"fiscalYear\":2015,\"application\":{\"deadlines\":{\"appeal\":{\"interval\":\"9\",\"otherInfo\":{\"content\":\"None\"}},\"renewal\":{\"interval\":\"9\",\"otherInfo\":{\"content\":\"None\"}},\"approval\":{\"interval\":\"9\"},\"submission\":{\"flag\":\"no\"}},\"procedures\":{\"additionalInfo\":{\"content\":\"Letters should be submitted to the Agricultural Research Service, Department of Agriculture. Give name of applicants, location of facilities, and State of incorporation, if any.\"}},\"selectionCriteria\":{\"flag\":\"yes\",\"content\":\"Peer review.\"}},\"eligibility\":{\"applicant\":{\"types\":[\"0041\"],\"additionalInfo\":{\"content\":\"Usually nonprofit institutions of higher education or other nonprofit research organizations, whose primary purpose is conducting scientific research.\"},\"assistanceUsageTypes\":[\"22\"]},\"beneficiary\":{\"types\":[\"19\",\"7\"],\"additionalInfo\":{\"content\":\"Usually nonprofit institutions of higher education or other nonprofit research organizations, whose primary purpose is conducting scientific research.\"}},\"documentation\":{\"flag\":\"na\"}},\"programNumber\":\"10.001\",\"authorizations\":[{\"USC\":{\"title\":\"7\",\"section\":\"427-427i, 1624\"},\"act\":{\"description\":\"Food Security Act of 1985\"},\"version\":1,\"publicLaw\":{\"number\":\"198\",\"congressCode\":\"99\"},\"authorizationId\":\"c775cdfa0de8e6ef557ee48920116318\",\"authorizationType\":\"publiclaw\"}],\"organizationId\":\"e9c3af2c5ece7d62bd3a29d957152c84\",\"preApplication\":{\"coordination\":{\"flag\":\"yes\",\"questions\":{\"ExecutiveOrder12372\":{\"flag\":\"no\"}},\"environmentalImpact\":{\"flag\":\"no\"}}},\"relatedPrograms\":{\"flag\":\"yes\",\"relatedTo\":[\"07ed0ddb6a41a43e1fb11887dda677f6\",\"190044087999f1e3b1abe49cad4e0be0\"]},\"alternativeNames\":[\"(Extramural Research)\"],\"_id\":\"66d1d2645f8acd25c2e79bb60b7342da\",\"status\":\"Published\",\"archived\":false},\"parentProgramId\":\"f506ebab3ece4e3fc43ea56bd60ba987\",\"latest\":true,\"fiscalYearLatest\":true,\"publishedDate\":1439553318000,\"modifiedDate\":1449508171000,\"submittedDate\":1241197347000,\"status\":{\"code\":\"published\",\"value\":\"Published\"},\"archived\":false}}";
        $httpBackend.whenGET('/v1/program/66d1d2645f8acd25c2e79bb60b7342da').respond(responseJson);


        var relatedProgram1 = "{\"program\": {\"id\":\"07ed0ddb6a41a43e1fb11887dda677f6\",\"data\":{\"award\":{\"procedures\":{\"content\":\"Awards are made to States according to statute.\"}},\"title\":\"Payments to Agricultural Experiment Stations Under the Hatch Act\",\"usage\":{\"rules\":{\"content\":\"Money appropriated pursuant to this Act shall also be available, in addition to meeting expenses for research and investigations conducted under authority of Section 2, for printing and disseminating the results of such research, retirement of employees subject to the provisions of an Act approved March 4, 1940 (54 Stat. 39), administrative planning and direction, and for the purchase and rental of land and the construction, acquisition, alteration, or repair of buildings necessary for conducting research. The State Agricultural Experiment Stations are authorized to plan and conduct any research authorized under Section 2 of this Act in cooperation with each other and such other agencies and individuals as may contribute to the solution of the agricultural problems involved, and moneys appropriated pursuant to this Act shall be available for paying the necessary expenses of planning, coordinating, and conducting such cooperative research.  Up to 25 percent of funds to be used for integrated cooperative research and extension activities.\"},\"loanTerms\":{\"flag\":\"na\"},\"restrictions\":{\"flag\":\"na\"},\"discretionaryFund\":{\"flag\":\"na\"}},\"website\":\"http:\/\/www.reeusda.gov.\",\"projects\":{\"flag\":\"no\"},\"financial\":{\"accounts\":[{\"code\":\"12-1500-0-1-352\"}]},\"objective\":\"To support agricultural research at State Agricultural Experiment Stations.  Its purpose is to promote efficient production, marketing, distribution, and utilization of products of the farm as essential to the health and welfare of people and to promote a sound prosperous agriculture and rural life.  Up to 25 percent of funds to be used for integrated cooperative research and extension activities.\",\"postAward\":{\"records\":{\"content\":\"Maintained by project.  Retain payment documents 3 years.\"},\"documents\":{\"flag\":\"na\"},\"accomplishments\":{\"flag\":\"na\"}},\"assistance\":{\"formula\":{\"flag\":\"yes\"},\"limitation\":{\"content\":\"Fiscal year appropriated. Unobligated balance September 30 deducted from subsequent year allocation.  Funds are released quarterly under the electronic transfer system.\"}},\"fiscalYear\":2008,\"application\":{\"deadlines\":{\"submission\":{\"flag\":\"no\"}},\"procedures\":{\"questions\":{\"OMBCircularA102\":{\"flag\":\"no\"},\"OMBCircularA110\":{\"flag\":\"yes\"}},\"additionalInfo\":{\"content\":\"State 5-year plans of work must be submitted to and approved by CSREES before funds are released.  This program is subject to the provisions of OMB Circular No. A-110 as implemented by 7 CFR Part 3019.\"}},\"selectionCriteria\":{\"flag\":\"no\"}},\"eligibility\":{\"applicant\":{\"types\":[\"0009\",\"0015\",\"0021\"],\"additionalInfo\":{\"content\":\"Funds under the Hatch Act are allocated in accordance with the statutory formula stated in the Act to the State agricultural experiment stations of the 50 States, the District of Columbia, Guam, Puerto Rico, the Virgin Islands, American Samoa, Micronesia, and Northern Mariana Islands.  These institutions have been identified and declared eligible by their respective State legislatures.\"},\"assistanceUsageTypes\":[\"17\",\"2\",\"7\"]},\"beneficiary\":{\"types\":[\"10\",\"4\",\"7\"],\"additionalInfo\":{\"content\":\"Funds under the Hatch Act are allocated in accordance with the statutory formula stated in the Act to the State agricultural experiment stations of the 50 States, the District of Columbia, Guam, Puerto Rico, the Virgin Islands, American Samoa, Micronesia, and Northern Mariana Islands.  These institutions have been identified and declared eligible by their respective State legislatures.\"}},\"documentation\":{\"flag\":\"na\",\"questions\":{\"OMBCircularA87\":{\"flag\":\"no\"}}}},\"subjectTerms\":[\"0029001\",\"0029013\",\"0029016\",\"0029026\"],\"programNumber\":\"10.203\",\"organizationId\":\"4dd6e77a280ee2eb8bca5cf0c4183958\",\"preApplication\":{\"coordination\":{\"flag\":\"yes\",\"questions\":{\"ExecutiveOrder12372\":{\"flag\":\"no\"}},\"environmentalImpact\":{\"flag\":\"no\"}}},\"functionalCodes\":[\"0001004\",\"0001005\"],\"relatedPrograms\":{\"flag\":\"yes\",\"relatedTo\":[\"190044087999f1e3b1abe49cad4e0be0\",\"4d92e0de3d350237400c7a2e39755ec7\",\"6aac5ca2d5adf8d3e369b86d4c0823c5\",\"811601a53c56baf3de8ec46a3c155139\",\"bd19f77b4f3b41f7619ae77a165f9a1d\",\"c5d41a2c08913a7438e28d464e609835\",\"d10084bc379a420f8ea52500f71a424b\",\"d10eb3bbfd5a6c96ece5dc26631090a6\",\"f201edc7e6232a057f51464901b64231\",\"f506ebab3ece4e3fc43ea56bd60ba987\"]},\"alternativeNames\":[\"(Hatch Act)\"],\"_id\":\"07ed0ddb6a41a43e1fb11887dda677f6\",\"status\":\"Published\",\"archived\":false},\"parentProgramId\":null,\"latest\":false,\"fiscalYearLatest\":true,\"publishedDate\":1221091200000,\"modifiedDate\":1221091200000,\"submittedDate\":1241197348000,\"status\":{\"code\":\"published\",\"value\":\"Published\"},\"archived\":false}}";
        $httpBackend.whenGET('/v1/program/07ed0ddb6a41a43e1fb11887dda677f6').respond(relatedProgram1);

        var relatedProgram2 = "{\"program\": {\"id\":\"190044087999f1e3b1abe49cad4e0be0\",\"data\":{\"award\":{\"procedures\":{\"content\":\"Proposals are reviewed by a peer panel of qualified scientists and other appropriate persons who are specialists in the field covered by the proposal. Proposals are funded in order of merit to the extent permitted by available funds.\"}},\"title\":\"Grants for Agricultural Research, Special Research Grants\",\"usage\":{\"rules\":{\"content\":\"Areas of basic and applied research and extension and education are generally limited to high priority problems of a regional or national scope.  Areas currently awarded on a competitive basis include Pest Management Alternatives and Citrus Tristeza Research.\"},\"loanTerms\":{\"flag\":\"na\"},\"restrictions\":{\"flag\":\"na\"},\"discretionaryFund\":{\"flag\":\"na\"}},\"website\":\"http:\/\/www.reeusda.gov.\",\"projects\":{\"flag\":\"no\"},\"financial\":{\"accounts\":[{\"code\":\"12-1500-0-1-352\"}]},\"objective\":\"To carry out research, to facilitate or expand promising breakthroughs in areas of the food and agricultural sciences of importance to the nation and to facilitate or expand on-going State-Federal food and agricultural research programs.\",\"postAward\":{\"records\":{\"content\":\"Grantees are expected to maintain separate records for each grant to ensure that funds are used for the purpose for which the grant was made. Records are subject to inspection during the life of the grant and for three years thereafter.\"},\"documents\":{\"flag\":\"na\"},\"accomplishments\":{\"flag\":\"na\"}},\"assistance\":{\"formula\":{\"flag\":\"no\"},\"limitation\":{\"content\":\"From 1 to 3 years.\"}},\"fiscalYear\":2008,\"application\":{\"deadlines\":{\"renewal\":{\"otherInfo\":{\"content\":\"Requests for renewal support must be submitted as new proposals at the announced deadline, and are considered in equal competition with other proposals.\"}},\"approval\":{\"otherInfo\":{\"content\":\"From four to six months.\"}},\"submission\":{\"flag\":\"yes\",\"additionalInfo\":{\"content\":\"Specific deadlines dates are announced on Agency\'s Web site and in the request for applications or guidelines for each fiscal year.\"}}},\"procedures\":{\"questions\":{\"OMBCircularA102\":{\"flag\":\"no\"},\"OMBCircularA110\":{\"flag\":\"yes\"}},\"additionalInfo\":{\"content\":\"Formal proposals are solicited and should be submitted to the Proposal Services Unit, Competitive Programs, CSREES, USDA, as outlined in the guidelines and\/or requests for proposals. Application procedures are contained in the guidelines  or request for applications. This program is subject to the provisions of OMB Circular No. A-110, Special Research Grants Program Administrative Provisions.\"}},\"selectionCriteria\":{\"flag\":\"no\"}},\"eligibility\":{\"applicant\":{\"types\":[\"0009\",\"0015\",\"0035\",\"0039\"],\"additionalInfo\":{\"content\":\"Special Research Grants: State agricultural experiment stations, all colleges and universities, other research institutions and organizations, Federal agencies, private organizations or corporations and individuals having a demonstrable capacity to conduct research activities to facilitate or expand promising breakthroughs in areas of the food and agricultural sciences of importance to the United States.\"},\"assistanceUsageTypes\":[\"17\"]},\"beneficiary\":{\"types\":[\"16\",\"17\",\"18\",\"7\",\"8\"],\"additionalInfo\":{\"content\":\"For Special Research Grants: State agricultural experiment stations, all colleges and universities, other research institutions and organizations, Federal agencies, private organizations or corporations and individuals having a demonstrable capacity to conduct research activities to facilitate or expand promising breakthroughs in areas of the food and agricultural sciences of importance to the United States.\"}},\"documentation\":{\"flag\":\"na\",\"questions\":{\"OMBCircularA87\":{\"flag\":\"no\"}}}},\"subjectTerms\":[\"0029002\",\"0029003\",\"0029004\",\"0029005\",\"0029011\",\"0029013\",\"0029016\",\"0029017\",\"0029021\",\"0029030\",\"0029031\",\"0401001\",\"0637001\",\"0655003\",\"0655004\",\"1001001\"],\"programNumber\":\"10.200\",\"organizationId\":\"4dd6e77a280ee2eb8bca5cf0c4183958\",\"preApplication\":{\"coordination\":{\"flag\":\"yes\",\"questions\":{\"ExecutiveOrder12372\":{\"flag\":\"no\"}},\"environmentalImpact\":{\"flag\":\"no\"}}},\"functionalCodes\":[\"0001004\",\"0003004\"],\"relatedPrograms\":{\"flag\":\"yes\",\"relatedTo\":[\"07ed0ddb6a41a43e1fb11887dda677f6\",\"4d92e0de3d350237400c7a2e39755ec7\",\"6aac5ca2d5adf8d3e369b86d4c0823c5\",\"811601a53c56baf3de8ec46a3c155139\",\"bd19f77b4f3b41f7619ae77a165f9a1d\",\"c3a898e314703ea128b7c1be88d86d55\",\"c5d41a2c08913a7438e28d464e609835\",\"d10084bc379a420f8ea52500f71a424b\",\"d10eb3bbfd5a6c96ece5dc26631090a6\",\"f506ebab3ece4e3fc43ea56bd60ba987\"]},\"alternativeNames\":[\"(Special Research Grants)\"],\"_id\":\"190044087999f1e3b1abe49cad4e0be0\",\"status\":\"Published\",\"archived\":false},\"parentProgramId\":null,\"latest\":false,\"fiscalYearLatest\":true,\"publishedDate\":1221091200000,\"modifiedDate\":1221091200000,\"submittedDate\":1241197347000,\"status\":{\"code\":\"published\",\"value\":\"Published\"},\"archived\":false}}";
        $httpBackend.whenGET('/v1/program/190044087999f1e3b1abe49cad4e0be0').respond(relatedProgram2);


        var dictionariesResponse = "[{\"id\":\"assistance_type\",\"elements\":[{\"element_id\":\"0001\",\"description\":\"Formula Grants - Allocations of money to States or their subdivisions in accordance with a distribution formula prescribed by law or administrative regulation, for activities of a continuing nature not confined to a specific project.\",\"value\":\"FORMULA GRANTS\",\"code\":\"A\",\"elements\":[{\"element_id\":\"0001001\",\"description\":null,\"value\":\"Formula Grants\",\"code\":\"A\",\"elements\":null},{\"element_id\":\"0001002\",\"description\":null,\"value\":\"Formula Grants (Apportionments)\",\"code\":\"A\",\"elements\":null},{\"element_id\":\"0001003\",\"description\":null,\"value\":\"Formula Grants (Cooperative Agreements)\",\"code\":\"A\",\"elements\":null},{\"element_id\":\"0001004\",\"description\":null,\"value\":\"Formula Grants (Health Incentive Grants)\",\"code\":\"A\",\"elements\":null}]},{\"element_id\":\"0003\",\"description\":\"Project Grants - The funding, for fixed or known periods, of specific projects or the delivery of specific services or products without liability for damages for failure to perform. Project grants include fellowships, scholarships, research grants, training grants, traineeships, experimental and demonstration grants, evaluation grants, planning grants, technical assistance grants, survey grants, construction grants, and unsolicited contractual agreements.\",\"value\":\"PROJECT GRANTS\",\"code\":\"B\",\"elements\":[{\"element_id\":\"0003001\",\"description\":null,\"value\":\"Cooperative Agreements\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003002\",\"description\":null,\"value\":\"Cooperative Agreements (Discretionary Grants)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003003\",\"description\":null,\"value\":\"Project Grants\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003004\",\"description\":null,\"value\":\"Project Grants (Capacity Building and Complaint Processing, Training)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003005\",\"description\":null,\"value\":\"Project Grants (Contracts)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003006\",\"description\":null,\"value\":\"Project Grants (Cooperative Agreements or Contracts)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003007\",\"description\":null,\"value\":\"Project Grants (Cooperative Agreements)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003008\",\"description\":null,\"value\":\"Project Grants (Discretionary)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003009\",\"description\":null,\"value\":\"Project Grants (Fellowships)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003010\",\"description\":null,\"value\":\"Project Grants (for administration projects authorized under Section\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003011\",\"description\":null,\"value\":\"Project Grants (for collaborative design of curriculum, production of\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003012\",\"description\":null,\"value\":\"Project Grants (for specified projects)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003013\",\"description\":null,\"value\":\"Project Grants (including individual awards)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003014\",\"description\":null,\"value\":\"Project Grants (including travel grants)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003015\",\"description\":null,\"value\":\"Project Grants (Rehabilitation of existing indoor and outdoor recreat\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003016\",\"description\":null,\"value\":\"Project Grants (Special)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003017\",\"description\":null,\"value\":\"Project Grants (to capitalize loan funds)\",\"code\":\"B\",\"elements\":null},{\"element_id\":\"0003018\",\"description\":null,\"value\":\"Project Grants (with Formula Distribution)\",\"code\":\"B\",\"elements\":null}]},{\"element_id\":\"0005\",\"description\":\"Direct Payments for a Specified Use - Financial assistance provided directly to individuals, private firms, and other private institutions to encourage or subsidize a particular activity by conditioning the receipt of the on a particular performance by the recipient. This does not include solicited contracts for the procurement of goods and services for the Federal government.\",\"value\":\"DIRECT PAYMENTS FOR A SPECIFIED USE\",\"code\":\"C\",\"elements\":[{\"element_id\":\"0005001\",\"description\":null,\"value\":\"Direct Payments for Specified Use\",\"code\":\"C\",\"elements\":null},{\"element_id\":\"0005002\",\"description\":null,\"value\":\"Direct Payments for Specified Use (Cooperative Agreements)\",\"code\":\"C\",\"elements\":null}]},{\"element_id\":\"0007\",\"description\":\"Direct Payments with Unrestricted Use - Financial assistance provided directly to beneficiaries who satisfy eligibility requirements with no restrictions imposed on the recipient as to how the money is spent. Included are payments under retirement, pension, and compensation programs.\",\"value\":\"DIRECT PAYMENTS WITH UNRESTRICTED USE\",\"code\":\"D\",\"elements\":[{\"element_id\":\"0007001\",\"description\":null,\"value\":\"Direct Payments with Unrestricted Use\",\"code\":\"D\",\"elements\":null}]},{\"element_id\":\"0009\",\"description\":\"Direct Loans - Financial assistance provided through the lending of Federal monies for a specific period of time, with a reasonable expectation of repayment. Such loans may or may not require the payment of interest.\",\"value\":\"DIRECT LOANS\",\"code\":\"E\",\"elements\":[{\"element_id\":\"0009001\",\"description\":null,\"value\":\"Direct Loans\",\"code\":\"E\",\"elements\":null}]},{\"element_id\":\"0011\",\"description\":\"Guaranteed\\\/Insured Loans - Programs in which the Federal Government makes an arrangement to indemnify a lender against all or part of all of any defaults by those responsible for the repayment of loans.\",\"value\":\"GUARANTEED\\\/INSURED LOANS\",\"code\":\"F\",\"elements\":[{\"element_id\":\"0011001\",\"description\":null,\"value\":\"Guaranteed\\\/Insured Loans\",\"code\":\"F\",\"elements\":null},{\"element_id\":\"0011002\",\"description\":null,\"value\":\"Guaranteed\\\/Insured Loans (including Guaranty Participation Loans)\",\"code\":\"F\",\"elements\":null},{\"element_id\":\"0011003\",\"description\":null,\"value\":\"Guaranteed\\\/Insured Loans (including Immediate Participation Loans)\",\"code\":\"F\",\"elements\":null},{\"element_id\":\"0011004\",\"description\":null,\"value\":\"Loan Guarantees\\\/Grants\",\"code\":\"F\",\"elements\":null}]},{\"element_id\":\"0013\",\"description\":\"Insurance - Financial assistance provided to assure reimbursement for losses sustained under specified conditions. Coverage may be provided directly by the Federal Government or through private carriers and may or may not involve the payment of premiums.\",\"value\":\"INSURANCE\",\"code\":\"G\",\"elements\":[{\"element_id\":\"0013001\",\"description\":null,\"value\":\"Insurance\",\"code\":\"G\",\"elements\":null},{\"element_id\":\"0013002\",\"description\":null,\"value\":\"Insurance (Guaranteed Surety Bonds)\",\"code\":\"G\",\"elements\":null},{\"element_id\":\"0013003\",\"description\":null,\"value\":\"Insurance (Reimbursement)\",\"code\":\"G\",\"elements\":null}]},{\"element_id\":\"0015\",\"description\":\"Sale, Exchange, or Donation of Property or Goods - Programs that provide for the sale, exchange, or donation of Federal real property, personal property, commodities, and other goods including land, buildings, equipment, food, and drugs. This does not include the loan of, use of, or access to Federal facilities or property.\",\"value\":\"SALE, EXCHANGE, OR DONATION OF PROPERTY OR GOODS\",\"code\":\"H\",\"elements\":[{\"element_id\":\"0015001\",\"description\":null,\"value\":\"Sale, Exchange, or Donation of Property and Goods\",\"code\":\"H\",\"elements\":null}]},{\"element_id\":\"0017\",\"description\":\"Use of Property, Facilities, or Equipment - Programs that provide for the loan of, use of, or access to Federal facilities or property wherein the federally owned facilities or property do not remain in the possession of the recipient of the assistance.\",\"value\":\"USE OF PROPERTY, FACILITIES, OR EQUIPMENT\",\"code\":\"I\",\"elements\":[{\"element_id\":\"0017001\",\"description\":null,\"value\":\"Use of Property, Facilities, and Equipment\",\"code\":\"I\",\"elements\":null}]},{\"element_id\":\"0019\",\"description\":\"Provision of Specialized Services - Programs that provide Federal personnel to directly perform certain tasks for the benefit of communities or individuals. These services may be performed in conjunction with non-Federal personnel, but they involve more than consultation, advice, or counseling.\",\"value\":\"PROVISION OF SPECIALIZED SERVICES\",\"code\":\"J\",\"elements\":[{\"element_id\":\"0019001\",\"description\":null,\"value\":\"Provision of Specialized Services\",\"code\":\"J\",\"elements\":null}]},{\"element_id\":\"0021\",\"description\":\"Advisory Services and Counseling - Programs that provide Federal specialists to consult, advise, or counsel communities or individuals including conferences, workshops, or personal contacts. This may involve the use of published information, but only in a secondary capacity.\",\"value\":\"ADVISORY SERVICES AND COUNSELING\",\"code\":\"K\",\"elements\":[{\"element_id\":\"0021001\",\"description\":null,\"value\":\"Advisory Services and Counseling\",\"code\":\"K\",\"elements\":null},{\"element_id\":\"0021002\",\"description\":null,\"value\":\"Advisory Services on Compliance\",\"code\":\"K\",\"elements\":null}]},{\"element_id\":\"0023\",\"description\":\"Dissemination of Technical Information - Programs that provide for the publication and distribution of information or data of a specialized technical nature, frequently through clearinghouses or libraries. This does not include conventional public information services designed for general public consumption.\",\"value\":\"DISSEMINATION OF TECHNICAL INFORMATION\",\"code\":\"L\",\"elements\":[{\"element_id\":\"0023001\",\"description\":null,\"value\":\"Dissemination of Technical Information\",\"code\":\"L\",\"elements\":null},{\"element_id\":\"0023002\",\"description\":null,\"value\":\"Information\",\"code\":\"L\",\"elements\":null}]},{\"element_id\":\"0025\",\"description\":\"Training - Programs that provide instructional activities conducted directly by a Federal agency for individuals not employed by the Federal Government.\",\"value\":\"TRAINING\",\"code\":\"M\",\"elements\":[{\"element_id\":\"0025001\",\"description\":null,\"value\":\"Training\",\"code\":\"M\",\"elements\":null}]},{\"element_id\":\"0027\",\"description\":\"Investigation of Complaints - Federal administrative agency activities that are initiated in response to requests, either formal or informal, to examine or investigate claims of violations of Federal statutes, policy, or procedure. Such claims must come from outside the Federal Government.\",\"value\":\"INVESTIGATION OF COMPLAINTS\",\"code\":\"N\",\"elements\":[{\"element_id\":\"0027020\",\"description\":null,\"value\":\"Resolution of Disputes\",\"code\":\"N\",\"elements\":null},{\"element_id\":\"0027001\",\"description\":null,\"value\":\"Investigation of Complaints\",\"code\":\"N\",\"elements\":null},{\"element_id\":\"0027002\",\"description\":null,\"value\":\"Investigation of Complaints (Compliance Reviews)\",\"code\":\"N\",\"elements\":null}]},{\"element_id\":\"0029\",\"description\":\"Federal Employment - Programs that reflect the government-wide resposibilities of the Office of Personnel Management in the recruitment and hiring of Federal civilian agency personnel.\",\"value\":\"FEDERAL EMPLOYMENT\",\"code\":\"O\",\"elements\":[{\"element_id\":\"0029001\",\"description\":null,\"value\":\"Federal Employment\",\"code\":\"O\",\"elements\":null}]}]},{\"id\":\"applicant_types\",\"elements\":[{\"element_id\":\"0020\",\"description\":null,\"value\":\"U.S. Territories and possessions\",\"code\":\"24\",\"elements\":null},{\"element_id\":\"0001\",\"description\":null,\"value\":\"Government - General\",\"code\":\"09\",\"elements\":null},{\"element_id\":\"0003\",\"description\":null,\"value\":\"Federal\",\"code\":\"10\",\"elements\":null},{\"element_id\":\"0005\",\"description\":null,\"value\":\"Interstate\",\"code\":\"11\",\"elements\":null},{\"element_id\":\"0007\",\"description\":null,\"value\":\"Intrastate\",\"code\":\"12\",\"elements\":null},{\"element_id\":\"0040\",\"description\":null,\"value\":\"State\",\"code\":\"13\",\"elements\":null},{\"element_id\":\"0009\",\"description\":null,\"value\":\"State (includes District of Columbia, public institutions of higher education and hospitals)\",\"code\":\"14\",\"elements\":null},{\"element_id\":\"0011\",\"description\":null,\"value\":\"Local (includes State-designated lndian Tribes, excludes institutions of higher education and hospitals\",\"code\":\"15\",\"elements\":null},{\"element_id\":\"0013\",\"description\":null,\"value\":\"Sponsored organization\",\"code\":\"18\",\"elements\":null},{\"element_id\":\"0015\",\"description\":null,\"value\":\"Public nonprofit institution\\\/organization (includes institutions of higher education and hospitals)\",\"code\":\"20\",\"elements\":null},{\"element_id\":\"0017\",\"description\":null,\"value\":\"Other public institution\\\/organization\",\"code\":\"21\",\"elements\":null},{\"element_id\":\"0019\",\"description\":null,\"value\":\"Federally Recognized lndian Tribal Governments\",\"code\":\"22\",\"elements\":null},{\"element_id\":\"0021\",\"description\":null,\"value\":\"U.S. Territories and possessions (includes institutions of higher education and hospitals)\",\"code\":\"23\",\"elements\":null},{\"element_id\":\"0023\",\"description\":null,\"value\":\"Non-Government - General\",\"code\":\"30\",\"elements\":null},{\"element_id\":\"0025\",\"description\":null,\"value\":\"Individual\\\/Family\",\"code\":\"31\",\"elements\":null},{\"element_id\":\"0027\",\"description\":null,\"value\":\"Minority group\",\"code\":\"32\",\"elements\":null},{\"element_id\":\"0029\",\"description\":null,\"value\":\"Specialized group (e.g. health professionals, students, veterans)\",\"code\":\"33\",\"elements\":null},{\"element_id\":\"0031\",\"description\":null,\"value\":\"Small business (less than 500 employees)\",\"code\":\"34\",\"elements\":null},{\"element_id\":\"0033\",\"description\":null,\"value\":\"Profit organization\",\"code\":\"35\",\"elements\":null},{\"element_id\":\"0035\",\"description\":null,\"value\":\"Private nonprofit institution\\\/organization (includes institutions of higher education and hospitals)\",\"code\":\"36\",\"elements\":null},{\"element_id\":\"0037\",\"description\":null,\"value\":\"Quasi-public nonprofit institution\\\/organization\",\"code\":\"37\",\"elements\":null},{\"element_id\":\"0039\",\"description\":null,\"value\":\"Other private institutions\\\/organizations\",\"code\":\"38\",\"elements\":null},{\"element_id\":\"0041\",\"description\":null,\"value\":\"Anyone\\\/general public\",\"code\":\"39\",\"elements\":null},{\"element_id\":\"0043\",\"description\":null,\"value\":\"Native American Organizations (includes lndian groups, cooperatives, corporations, partnerships, associations)\",\"code\":\"40\",\"elements\":null}]},{\"id\":\"assistance_usage_types\",\"elements\":[{\"element_id\":\"1\",\"description\":null,\"value\":\"No Functional Application\\\/Unlimited Application\",\"code\":\"00\",\"elements\":null},{\"element_id\":\"2\",\"description\":null,\"value\":\"Agriculture\\\/Forestry\\\/Fish and Game\",\"code\":\"12\",\"elements\":null},{\"element_id\":\"3\",\"description\":null,\"value\":\"Business\\\/Commerce\",\"code\":\"14\",\"elements\":null},{\"element_id\":\"4\",\"description\":null,\"value\":\"Civil Defense\\\/Disaster Prevention and Relief\\\/Emergency Preparedness\",\"code\":\"16\",\"elements\":null},{\"element_id\":\"5\",\"description\":null,\"value\":\"Communications\",\"code\":\"18\",\"elements\":null},{\"element_id\":\"6\",\"description\":null,\"value\":\"Community Development (includes Federal surplus property)\",\"code\":\"20\",\"elements\":null},{\"element_id\":\"7\",\"description\":null,\"value\":\"Construction\\\/Renewal\\\/Rehabilitation\",\"code\":\"22\",\"elements\":null},{\"element_id\":\"8\",\"description\":null,\"value\":\"Consumer Protection\",\"code\":\"24\",\"elements\":null},{\"element_id\":\"9\",\"description\":null,\"value\":\"Culture\\\/Arts\\\/Humanities\",\"code\":\"26\",\"elements\":null},{\"element_id\":\"10\",\"description\":null,\"value\":\"Economic Development\",\"code\":\"28\",\"elements\":null},{\"element_id\":\"11\",\"description\":null,\"value\":\"Elementary\\\/Secondary Education\",\"code\":\"30\",\"elements\":null},{\"element_id\":\"12\",\"description\":null,\"value\":\"Employment\\\/Labor\\\/Management\",\"code\":\"32\",\"elements\":null},{\"element_id\":\"13\",\"description\":null,\"value\":\"Energy\",\"code\":\"34\",\"elements\":null},{\"element_id\":\"14\",\"description\":null,\"value\":\"Environment (water, air, solid waste, pesticides, radiation)\",\"code\":\"36\",\"elements\":null},{\"element_id\":\"15\",\"description\":null,\"value\":\"Food and Nutrition\",\"code\":\"38\",\"elements\":null},{\"element_id\":\"16\",\"description\":null,\"value\":\"Health\\\/Medical\",\"code\":\"40\",\"elements\":null},{\"element_id\":\"17\",\"description\":null,\"value\":\"Higher Education (includes Research)\",\"code\":\"42\",\"elements\":null},{\"element_id\":\"18\",\"description\":null,\"value\":\"Housing\",\"code\":\"44\",\"elements\":null},{\"element_id\":\"19\",\"description\":null,\"value\":\"Income Security\\\/Social Service\\\/Welfare\",\"code\":\"46\",\"elements\":null},{\"element_id\":\"20\",\"description\":null,\"value\":\"International (includes Export\\\/lmport)\",\"code\":\"48\",\"elements\":null},{\"element_id\":\"21\",\"description\":null,\"value\":\"Law, Justice, and Legal Services\",\"code\":\"50\",\"elements\":null},{\"element_id\":\"22\",\"description\":null,\"value\":\"Libraries\\\/lnformation\\\/Statistics\",\"code\":\"52\",\"elements\":null},{\"element_id\":\"23\",\"description\":null,\"value\":\"Maritime\",\"code\":\"54\",\"elements\":null},{\"element_id\":\"24\",\"description\":null,\"value\":\"Natural Resources (mineral, water, wildlife, land)\",\"code\":\"56\",\"elements\":null},{\"element_id\":\"25\",\"description\":null,\"value\":\"Planning\",\"code\":\"58\",\"elements\":null},{\"element_id\":\"26\",\"description\":null,\"value\":\"Public Works\",\"code\":\"60\",\"elements\":null},{\"element_id\":\"27\",\"description\":null,\"value\":\"Recreation (includes Historic Preservation)\",\"code\":\"62\",\"elements\":null},{\"element_id\":\"28\",\"description\":null,\"value\":\"Regional Development\",\"code\":\"64\",\"elements\":null},{\"element_id\":\"29\",\"description\":null,\"value\":\"Science and Technology\",\"code\":\"66\",\"elements\":null},{\"element_id\":\"31\",\"description\":null,\"value\":\"Training\",\"code\":\"70\",\"elements\":null},{\"element_id\":\"30\",\"description\":null,\"value\":\"Transportation\",\"code\":\"68\",\"elements\":null},{\"element_id\":\"33\",\"description\":null,\"value\":\"Vocational Education\",\"code\":\"74\",\"elements\":null},{\"element_id\":\"34\",\"description\":null,\"value\":\"Vocational Rehabilitation\",\"code\":\"76\",\"elements\":null},{\"element_id\":\"32\",\"description\":null,\"value\":\"Youth Development\",\"code\":\"72\",\"elements\":null}]},{\"id\":\"beneficiary_types\",\"elements\":[{\"element_id\":\"1\",\"description\":null,\"value\":\"Federal\",\"code\":\"10\",\"elements\":null},{\"element_id\":\"2\",\"description\":null,\"value\":\"Interstate\",\"code\":\"11\",\"elements\":null},{\"element_id\":\"3\",\"description\":null,\"value\":\"Intrastate\",\"code\":\"12\",\"elements\":null},{\"element_id\":\"4\",\"description\":null,\"value\":\"State\",\"code\":\"14\",\"elements\":null},{\"element_id\":\"5\",\"description\":null,\"value\":\"Local\",\"code\":\"15\",\"elements\":null},{\"element_id\":\"6\",\"description\":null,\"value\":\"Sponsored organization\",\"code\":\"18\",\"elements\":null},{\"element_id\":\"7\",\"description\":null,\"value\":\"Public nonprofit institution\\\/organization\",\"code\":\"20\",\"elements\":null},{\"element_id\":\"8\",\"description\":null,\"value\":\"Other public institution\\\/organization\",\"code\":\"21\",\"elements\":null},{\"element_id\":\"9\",\"description\":null,\"value\":\"Federally Recognized Indian Tribal Governments\",\"code\":\"22\",\"elements\":null},{\"element_id\":\"10\",\"description\":null,\"value\":\"U.S. Territories\",\"code\":\"23\",\"elements\":null},{\"element_id\":\"11\",\"description\":null,\"value\":\"Individual\\\/Family\",\"code\":\"31\",\"elements\":null},{\"element_id\":\"12\",\"description\":null,\"value\":\"Minority group\",\"code\":\"32\",\"elements\":null},{\"element_id\":\"13\",\"description\":null,\"value\":\"Specialized group (e.g. health professionals, students, veterans)\",\"code\":\"33\",\"elements\":null},{\"element_id\":\"14\",\"description\":null,\"value\":\"Small business\",\"code\":\"34\",\"elements\":null},{\"element_id\":\"15\",\"description\":null,\"value\":\"Profit organization\",\"code\":\"35\",\"elements\":null},{\"element_id\":\"16\",\"description\":null,\"value\":\"Private nonprofit institution\\\/organization\",\"code\":\"36\",\"elements\":null},{\"element_id\":\"17\",\"description\":null,\"value\":\"Quasi-public nonprofit organization\",\"code\":\"37\",\"elements\":null},{\"element_id\":\"18\",\"description\":null,\"value\":\"Other private institution\\\/organization\",\"code\":\"38\",\"elements\":null},{\"element_id\":\"19\",\"description\":null,\"value\":\"Anyone\\\/general public\",\"code\":\"39\",\"elements\":null},{\"element_id\":\"20\",\"description\":null,\"value\":\"Native American Organizations\",\"code\":\"40\",\"elements\":null},{\"element_id\":\"21\",\"description\":null,\"value\":\"Health Professional\",\"code\":\"41\",\"elements\":null},{\"element_id\":\"22\",\"description\":null,\"value\":\"Education Professional\",\"code\":\"42\",\"elements\":null},{\"element_id\":\"23\",\"description\":null,\"value\":\"Student\\\/Trainee\",\"code\":\"43\",\"elements\":null},{\"element_id\":\"24\",\"description\":null,\"value\":\"Graduate Student\",\"code\":\"44\",\"elements\":null},{\"element_id\":\"25\",\"description\":null,\"value\":\"Scientist\\\/Researchers\",\"code\":\"45\",\"elements\":null},{\"element_id\":\"26\",\"description\":null,\"value\":\"Artist\\\/Humanist\",\"code\":\"46\",\"elements\":null},{\"element_id\":\"27\",\"description\":null,\"value\":\"Engineer\\\/Architect\",\"code\":\"47\",\"elements\":null},{\"element_id\":\"28\",\"description\":null,\"value\":\"Builder\\\/Contractor\\\/Developer\",\"code\":\"48\",\"elements\":null},{\"element_id\":\"29\",\"description\":null,\"value\":\"Farmer\\\/Rancher\\\/Agriculture Producer\",\"code\":\"49\",\"elements\":null},{\"element_id\":\"30\",\"description\":null,\"value\":\"Industrialist\\\/ Business person\",\"code\":\"50\",\"elements\":null},{\"element_id\":\"31\",\"description\":null,\"value\":\"Small Business Person\",\"code\":\"51\",\"elements\":null},{\"element_id\":\"32\",\"description\":null,\"value\":\"Consumer\",\"code\":\"52\",\"elements\":null},{\"element_id\":\"33\",\"description\":null,\"value\":\"Homeowner\",\"code\":\"53\",\"elements\":null},{\"element_id\":\"34\",\"description\":null,\"value\":\"Land\\\/Property Owner\",\"code\":\"54\",\"elements\":null},{\"element_id\":\"35\",\"description\":null,\"value\":\"Black\",\"code\":\"57\",\"elements\":null},{\"element_id\":\"36\",\"description\":null,\"value\":\"American Indian\",\"code\":\"58\",\"elements\":null},{\"element_id\":\"37\",\"description\":null,\"value\":\"Spanish Origin\",\"code\":\"59\",\"elements\":null},{\"element_id\":\"38\",\"description\":null,\"value\":\"Asian\",\"code\":\"60\",\"elements\":null},{\"element_id\":\"39\",\"description\":null,\"value\":\"Other Non-White\",\"code\":\"61\",\"elements\":null},{\"element_id\":\"40\",\"description\":null,\"value\":\"Migrant\",\"code\":\"62\",\"elements\":null},{\"element_id\":\"41\",\"description\":null,\"value\":\"U.S. Citizen\",\"code\":\"63\",\"elements\":null},{\"element_id\":\"42\",\"description\":null,\"value\":\"Refugee\\\/Alien\",\"code\":\"64\",\"elements\":null},{\"element_id\":\"43\",\"description\":null,\"value\":\"Veteran\\\/Service person\\\/Reservist (including dependents\",\"code\":\"65\",\"elements\":null},{\"element_id\":\"44\",\"description\":null,\"value\":\"Women\",\"code\":\"66\",\"elements\":null},{\"element_id\":\"45\",\"description\":null,\"value\":\"Disabled (e.g. Deaf, Blind, Physically Disabled)\",\"code\":\"69\",\"elements\":null},{\"element_id\":\"46\",\"description\":null,\"value\":\"Physically Afflicted (e.g. TB, Arthritis, Heart Disease)\",\"code\":\"70\",\"elements\":null},{\"element_id\":\"47\",\"description\":null,\"value\":\"Mentally Disabled\",\"code\":\"71\",\"elements\":null},{\"element_id\":\"48\",\"description\":null,\"value\":\"Drug Addict\",\"code\":\"72\",\"elements\":null},{\"element_id\":\"49\",\"description\":null,\"value\":\"Alcoholic\",\"code\":\"73\",\"elements\":null},{\"element_id\":\"50\",\"description\":null,\"value\":\"Juvenile Delinquent\",\"code\":\"74\",\"elements\":null},{\"element_id\":\"51\",\"description\":null,\"value\":\"Preschool\",\"code\":\"77\",\"elements\":null},{\"element_id\":\"52\",\"description\":null,\"value\":\"School\",\"code\":\"78\",\"elements\":null},{\"element_id\":\"53\",\"description\":null,\"value\":\"Infant (0-5)\",\"code\":\"76\",\"elements\":null},{\"element_id\":\"54\",\"description\":null,\"value\":\"Child (6-15)\",\"code\":\"79\",\"elements\":null},{\"element_id\":\"55\",\"description\":null,\"value\":\"Youth (16-21)\",\"code\":\"80\",\"elements\":null},{\"element_id\":\"56\",\"description\":null,\"value\":\"Senior Citizen (60+)\",\"code\":\"81\",\"elements\":null},{\"element_id\":\"57\",\"description\":null,\"value\":\"Unemployed\",\"code\":\"84\",\"elements\":null},{\"element_id\":\"58\",\"description\":null,\"value\":\"Welfare Recipient\",\"code\":\"85\",\"elements\":null},{\"element_id\":\"59\",\"description\":null,\"value\":\"Pension Recipient\",\"code\":\"86\",\"elements\":null},{\"element_id\":\"60\",\"description\":null,\"value\":\"Moderate Income\",\"code\":\"87\",\"elements\":null},{\"element_id\":\"61\",\"description\":null,\"value\":\"Low Income\",\"code\":\"88\",\"elements\":null},{\"element_id\":\"62\",\"description\":null,\"value\":\"Major Metropolis (over 250,000)\",\"code\":\"91\",\"elements\":null},{\"element_id\":\"63\",\"description\":null,\"value\":\"Other Urban\",\"code\":\"92\",\"elements\":null},{\"element_id\":\"64\",\"description\":null,\"value\":\"Suburban\",\"code\":\"93\",\"elements\":null},{\"element_id\":\"65\",\"description\":null,\"value\":\"Rural\",\"code\":\"94\",\"elements\":null},{\"element_id\":\"66\",\"description\":null,\"value\":\"Education (0-8)\",\"code\":\"96\",\"elements\":null},{\"element_id\":\"67\",\"description\":null,\"value\":\"Education (9-12)\",\"code\":\"97\",\"elements\":null},{\"element_id\":\"68\",\"description\":null,\"value\":\"Education (13+)\",\"code\":\"98\",\"elements\":null}]},{\"id\":\"yes_no_na\",\"elements\":[{\"element_id\":\"yes\",\"description\":\"Yes\",\"value\":\"Yes\",\"code\":\"yes\",\"elements\":null},{\"element_id\":\"no\",\"description\":\"No\",\"value\":\"No\",\"code\":\"no\",\"elements\":null},{\"element_id\":\"na\",\"description\":\"Not Applicable\",\"value\":\"Not Applicable\",\"code\":\"na\",\"elements\":null}]},{\"id\":\"phasing_assistance\",\"elements\":[{\"element_id\":\"lump\",\"description\":null,\"value\":\"lump sum\",\"code\":\"lump\",\"elements\":null},{\"element_id\":\"quarterly\",\"description\":null,\"value\":\"quarterly\",\"code\":\"quarterly\",\"elements\":null},{\"element_id\":\"letter\",\"description\":null,\"value\":\"by letter of credit\",\"code\":\"letter\",\"elements\":null},{\"element_id\":\"other\",\"description\":null,\"value\":\"other\",\"code\":\"other\",\"elements\":null}]}]";
        $httpBackend
            .whenGET(/\/v1\/dictionary(\?ids=[a-z_]+)*/i)
            .respond(dictionariesResponse);

        var historicalIndexResponse = "[{\"organizationId\":\"100500273\",\"fiscalYear\":1965,\"statusCode\":\"B\",\"changeDescription\":\"Agricultural Research Service\"},{\"organizationId\":\"100500273\",\"fiscalYear\":1969,\"statusCode\":\"B\",\"changeDescription\":\"Agricultural Research_Basic and Applied Research\"},{\"organizationId\":\"100500273\",\"fiscalYear\":1978,\"statusCode\":\"B\",\"changeDescription\":\"Number changed to 10.875\"},{\"organizationId\":\"100500273\",\"fiscalYear\":1981,\"statusCode\":\"U\",\"changeDescription\":\"Number changed from 10.875\"}]";
        $httpBackend
            .whenGET('/v1/historicalIndex/'+testId+'?programNumber=10.001')
            .respond(historicalIndexResponse);


        var fhCallResponse = "{\"error\":\"404 Not Found\",\"code\":404}";
        $httpBackend
            .whenGET('/v1/federalHierarchy/e9c3af2c5ece7d62bd3a29d957152c84?parentLevels=all&sort=name')
            .respond(fhCallResponse);


    });

    describe('Controller Tests:', function () {
        it('should receive a program, which is not null, from ProgramFactory', function () {
            var program = ProgramFactory.get({id: testId});
            $httpBackend.flush();
            expect(program).toBeDefined();
            //can not say program.id because the response from the programfactory doesnt have the full response json above.
            // the programfactory tranforms the response to just contain the data before returning it.
            expect(program._id).toEqual(testId);
        });


        it('should change the state to ViewProgram', function () {
            changeState('viewProgram', {id: testId});
            expect($state.is('viewProgram')).toBe(true);
            expect($stateParams.id).toEqual(testId);
        });

        it('should populate $scope.onPreviewPage inside the controller', function () {
            //set up the controller
            $scope = {};//$rootScope.$new();
            //change state; the controller relies on state obj.
            changeState('viewProgram', {id: testId});
            //instantiate controller with dependencies; this will populate the $scope object appropriately
            $controller('ViewProgramCtrl', {$scope: $scope});
            $httpBackend.flush();
            expect($scope.onPreviewPage).toEqual(false);
        });


        //it('should populate $scope.onPreviewPage to be true inside the controller when state is changed to previewProgram', function () {
        //    //set up the controller
        //    $scope = {};//$rootScope.$new();
        //    //change state
        //    changeState('previewProgram', {id: testId});
        //    expect($state.is('previewProgram')).toBe(true);
        //    //set up controller with all of its dependencies
        //    var controller = $controller('ViewProgramCtrl', {
        //        $scope: $scope,
        //        $state: $state,
        //        $stateParams: $stateParams
        //    });
        //    expect($scope.onPreviewPage).toEqual(true);
        //});


    });
});
